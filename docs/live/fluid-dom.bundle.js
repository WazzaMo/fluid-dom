var fluid=function(t){"use strict";function e(t,e){var r="";for(var s of t){null!=e[s]||(r+=`Value for ${s} was not provided.\n`)}return!r||(console.error(`Expected ${t.length} parameters:\n${r}`),!1)}class r{constructor(t){this.value=t||null}get Value(){return this.value}get isValid(){return!!this.value}}class s{constructor(t){this._webElement=t}each(t){for(var e of this._webElement.attributes)t(e.name,e.value);return this}attributeNames(){var t=new Array;for(var e of this._webElement.attributes)t.push(e.name);return t}add(t,e){return this.set(t,e)}set(t,e){return this._webElement.setAttribute(t,e),this}with(t,e){return e(this.get(t)),this}get(t){return this._webElement.getAttribute(t)}has(t){return null!=this._webElement.getAttribute(t)}remove(t){return this._webElement.removeAttribute(t),this}}class n{constructor(t,e){this.element=e,this.htmlElement=t}each(t){for(var e of this.htmlElement.classList)t(e);return this}has(t){return this.htmlElement.classList.contains(t)}whenHas(t,e){return this.has(t)&&e(this.element),this}add(t){if(t&&t.length>0){if(!this.htmlElement)throw Error("Can't edit classes on DomElement that provides no HTMLElement.");this.htmlElement.classList.add(t)}else console.error(`Class name given was "${t}" - it must not be empty!`);return this}remove(t){return this.htmlElement.classList.remove(t),this}set(t){return this.has(t)||this.add(t),this}}class i{constructor(){}each(t){return this}has(t){return!1}whenHas(t,e){return this}add(t){return this}remove(t){return this}set(t){return this}}function o(t){let e=[];for(var r=0;r<t.length;r++){let s=t[r];e.push(new a(s))}return e}function l(t){let e="";if(t){e=t.getAttribute("id")?"#{$id}":t.parentElement?`${l(t.parentElement)}>${t.tagName}`:t.tagName}return e}class a{constructor(t){this.domElement=new r(t)}alertInvalid(){console.error("IElement[DomElement] is invalid.")}static getListFromSelector(t){return o(document.querySelectorAll(t))}static getListFromClass(t){return o(document.querySelectorAll(`.${t}`))}static getListFromTagName(t){return o(document.querySelectorAll(t))}static getElementFromId(t){let e=document.querySelector(`#${t}`);return a.makeFromElement(e)}static getElementFromSelector(t){let e=document.querySelector(t);return a.makeFromElement(e)}static nullElement(){return new a}static makeFromElement(t){return t?new a(t):this.nullElement()}isValid(){return this.domElement.isValid}getParent(){if(this.domElement.isValid){let t,e=this.domElement.Value.parentElement;return t=e?new a(e):new a}return a.nullElement()}withChildren(t){if(this.domElement.isValid&&this.domElement.Value.children.length>0){t(o(this.domElement.Value.children))}return this}expect(t){if(this.domElement.isValid){let e=this.domElement.Value.tagName.toUpperCase(),r=t.toUpperCase();e!=r&&console.error(`Expected ${r} but Actual tagName was ${e}`)}else this.alertInvalid();return this}getId(){return this.attributes().get("id")}hasId(){return this.attributes().has("id")}exists(){return this.isValid()}findAll(t){let e=t.selector||t.tagName;if(e){return o(this.domElement.Value.querySelectorAll(e))}return[]}selectFirst(t){if(this.domElement.isValid){let e=function(t,e){let r=t.querySelector(e);return r||((r=document.querySelector(`${l(t)}>${e}`))?r:null)}(this.domElement.Value,t);if(e)return new a(e)}return new a}selectorPath(){return this.domElement.isValid?l(this.domElement.Value):(this.alertInvalid(),"")}tagName(){return this.domElement.isValid?this.domElement.Value.tagName:(this.alertInvalid(),"UNKNOWN")}text(t){if(this.domElement.isValid){let e=this.domElement.Value;return t?(e.innerText=t,this):e.innerText}return this.alertInvalid(),""}html(t){if(this.domElement.isValid){let e=this.domElement.Value;return t?(e.innerHTML=t,this):e.innerHTML}return this.alertInvalid(),""}append(t){var e=`${this.html()}${t}`;return this.html(e),this}prepend(t){var e=`${t}${this.html()}`;return this.html(e),this}remove(){this.domElement.isValid?this.domElement.Value.remove():this.alertInvalid()}attributes(){return new s(this.domElement.Value)}classes(){return this.domElement.isValid?new n(this.domElement.Value,this):new i}on(t){if(e(["event","handler"],t)&&this.domElement.isValid){var r=t.event,s=t.handler,n=t.keepDefault;this.domElement.Value.addEventListener(r,function(t){n||t.preventDefault(),s(t)})}}value(){if(this.domElement.isValid){let t=this.domElement.Value;if(t.value)return t.value}}}var h,u,m,c,d;!function(t){t.FailedToLocate="Failed to locate",t.Id="id",t.Selector="selector",t.Class="class",t.TagName="tagName",t.ConstructedWithElement="from given element",t.ConstructedWithChildren="from given list of children",t.Mock="Mock"}(h||(h={})),function(t){t.Button="BUTTON",t.Div="DIV",t.Input="INPUT",t.Paragraph="P"}(u||(u={})),(m=t.HttpMethod||(t.HttpMethod={})).CONNECT="CONNECT",m.DELETE="DELETE",m.GET="GET",m.HEAD="HEAD",m.OPTIONS="OPTIONS",m.PATCH="PATCH",m.POST="POST",m.PUT="PUT",m.TRACE="TRACE",(c=t.HttpResponseType||(t.HttpResponseType={})).TEXT="text",c.ARRAYBUFFER="arraybuffer",c.BLOB="blob",c.DOCUMENT="document",c.JSON="json",(d=t.HttpProtocol||(t.HttpProtocol={})).HTTP="http",d.HTTPS="https",d.FILE="file";class p{constructor(t){this.httpObject=t,this.promise=void 0}createPromise(t){this.result=void 0,this.promise=new Promise((e,r)=>{let s=this;t(function(t){s.result=t,e(t)},r)})}isResolved(){return null!=this.result}http(){return this.httpObject}afterResult(t){return this.hasPromise(this.promise)&&this.promise.then(e=>{t(this.httpObject,e)}),this}then(t){return this.hasPromise(this.promise)?this.next(this.promise.then(t)):this}catch(t){return this.hasPromise(this.promise)?this.next(this.promise.catch(t)):this}hasPromise(t){return this.promise instanceof Promise}next(t){let e=new p(this.httpObject);return e.promise=t,e}}class E{constructor(){this.protocol=t.HttpProtocol.HTTP,this.port=void 0,this.hostname="",this.requestHeaders=[],this.path="",this.method=t.HttpMethod.GET,this.body=void 0,this.uploadData=void 0,this.responseType=t.HttpResponseType.TEXT,this.timeoutMS=1e3}host(t,e,r){return this.hostname=e,this.port=r,this.protocol=t,this}header(t,e){return this.requestHeaders.push({name:t,value:e}),this}expectedData(t){return this.responseType=t,this}timeoutAt(t){return this.timeoutMS=t,this}context(t){let e=new E;return e.protocol=this.protocol,e.port=this.port,e.hostname=this.hostname,e.requestHeaders=(new Array).concat(this.requestHeaders),e.path=this.path,e.method=this.method,e.body=this.body,e.uploadData=this.uploadData,e.responseType=this.responseType,t(e),this}call(t,e,r){this.method=t,this.path=e,this.body="string"==typeof r?r:JSON.stringify(r),this.syncPortAndProtocol();let s=this.port?`:${this.port}`:"",n=`${this.protocol}://${this.hostname}${s}${e}`,i=this.createRequestTo(n),o=this.setHandlers(i);return this.addAnyHeaders(i),i.send(this.body),o}syncPortAndProtocol(){(this.protocol==t.HttpProtocol.HTTP&&80==this.port||this.protocol==t.HttpProtocol.HTTPS&&443==this.port||this.protocol==t.HttpProtocol.FILE)&&(this.port=void 0)}createRequestTo(t){let e=new XMLHttpRequest;return e.timeout=this.timeoutMS,e.open(this.method,t),e}setErrorHandlers(t,e){t.onabort=(()=>{e("Request Aborted")}),t.ontimeout=(()=>{e("Timed out")}),t.onerror=(()=>{e("Error occurred.")})}createResponseObject(t){let e=t.getAllResponseHeaders().split("\r\n").map(t=>{let e=t.split(":");return e&&2==e.length?{name:e[0],value:e[1]}:void 0}).filter(t=>null!=t),r={};for(var s in e){let t=e[s];t&&(r[t.name]=t.value)}return{status:t.status,type:t.responseType,body:t.response,headers:r}}setOnCompleteHandler(t,e,r){t.onreadystatechange=(()=>{4==t.readyState&&(200==t.status?e(this.createResponseObject(t)):r(`Returned HTTP ${t.status}`))})}addAnyHeaders(t){if(this.requestHeaders.length>0)for(var e of this.requestHeaders)t.setRequestHeader(e.name,e.value)}setHandlers(t){let e=new p(this);return e.createPromise((e,r)=>{this.setErrorHandlers(t,r),this.setOnCompleteHandler(t,e,r)}),e}}const v=["abort","afterscriptexecute","animationcancel","animationend","animationiteration","auxclick","beforescriptexecute","blur","change","click","close","contextmenu","dblclick","error","focus","fullscreenchange","fullscreenerror","gotpointercapture","input","keydown","keypress","keyup","load","loadend","loadstart","lostpointercapture","mousedown","mousemove","mouseout","mouseover","mouseup","offline","online","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","reset","resize","scroll","select","selectionchange","selectionchange","selectstart","submit","touchcancel","touchmove","touchstart","transitioncancel","transitionend","visibilitychange","wheel"];const f={};for(var T of v)f[T.toUpperCase()]=T;return t.DOM=class{constructor(){this.events=function(){var t={};for(var e of v)t[e.toUpperCase()]=e;return t}()}findElement(t){let e=t.id;if(e)return a.getElementFromId(e);let r=t.selector;return r?a.getElementFromSelector(r):a.nullElement()}findAll(t){let e=t.selector;if(e)return a.getListFromSelector(e);let r=t.class;if(r)return a.getListFromClass(r);let s=t.tagName;return s?a.getListFromTagName(s):[]}buttonOn(t){if(e(["id","event","handler"],t)){var r=t.id;this.findElement({id:r}).expect(u.Button).on(t)}}},t.Events=f,t.Http=E,t}({});
